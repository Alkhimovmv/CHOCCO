"use strict";function ownKeys(t,e){var n,a=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)),a}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var player;!function(){function a(e){var t=e.find(".team__content");e.find(".team__item").removeClass("active"),t.height(0)}$(".team__title").click(function(e){var t=$(e.currentTarget),n=t.closest(".team");t.closest(".team__item").hasClass("active")?a(n):(a(n),n=(e=t).closest(".team__item"),t=n.find(".team__content"),e=t.find(".team__content-block").height(),n.addClass("active"),t.height(e))});function o(e){var t,n,a=e.find(".menu-acco__content"),o=(t=e,i=0,n=$(window).width(),o=(o=t.closest(".menu-acco").find(".menu-acco__trigger")).width()*o.length,t.find(".menu-acco__container"),t=window.matchMedia("(max-width: 768px)").matches,{container:i=window.matchMedia("(max-width: 480px)").matches?n:t?n-o:524,textContainer:i}),i=e.find(".menu-acco__container");e.addClass("active"),a.width(o.container),i.width(o.textContainer)}function i(e){var t=e.find(".menu-acco__item"),e=e.find(".menu-acco__content");t.removeClass("active"),e.width(0)}window.matchMedia("(max-width: 480px)").matches;window.matchMedia("(max-width: 480px)").matches?($(".menu-acco--trigger .menu-acco__trigger").on("click",function(e){e.preventDefault();var t=$(e.currentTarget).closest(".menu-acco__item"),e=t.index(),e=$(".menu-acco--content .menu-acco__item").eq(e);t.addClass("hidden"),o(e)}),$(".menu-acco--content .menu-acco__trigger").on("click",function(e){e.preventDefault(),$(".menu-acco--trigger .menu-acco__item").removeClass("hidden"),i($(".menu-acco--content"))})):$(".menu-acco__trigger").on("click",function(e){e.preventDefault();var t=$(e.currentTarget),n=t.closest(".menu-acco__item"),e=n.hasClass("active"),t=t.closest(".menu-acco");e?i(t):(i(t),o(n))})}(),document.getElementById("hamburger").addEventListener("click",function(){document.getElementById("menu").classList.add("modal_active")}),document.getElementById("modal__close").addEventListener("click",function(){document.getElementById("menu").classList.remove("modal_active")}),document.querySelectorAll(".modal-menu__link").forEach(function(e){e.addEventListener("click",function(){document.getElementById("menu").classList.remove("modal_active")})}),document.querySelector("#phone").addEventListener("keydown",function(e){var t=!1,n=!1,a=!1;(0<=e.key||e.key<=9)&&(t=!0),"-"==e.key&&(n=!0),"ArrowLeft"!=e.key&&"ArrowRight"!=e.key&&"Backspace"!=e.key||(a=!0),t||n||a||e.preventDefault()}),function(){var e;ymaps.ready(function(){e=new ymaps.Map("map",{center:[55.75,37.6],zoom:14,controls:[]});var t=new ymaps.GeoObjectCollection({},{draggable:!1,iconLayout:"default#image",iconImageHref:"./img/icons/marker.png",iconImageSize:[58,73],iconImageOffset:[-3,-42]});[[55.743455,37.583656],[55.755799,37.584804],[55.747812,37.60694],[55.755103,37.625051]].forEach(function(e){t.add(new ymaps.Placemark(e))}),e.geoObjects.add(t),e.behaviors.disable("scrollZoom")})}(),$(".form").submit(function(e){e.preventDefault();var t=$(e.currentTarget),n=t.find("[name='name']"),a=t.find("[name='phone']"),o=t.find("[name='comment']"),e=t.find("[name='to']"),t=(t=t,[n,a,o,e].forEach(function(e){e.removeClass("input-error"),""==e.val().trim()&&e.addClass("input-error")}),0==t.find(".input-error").length),i=$("#modal-form"),r=i.find(".modal-form__content");i.removeClass("error-modal"),t&&((e=$.ajax({url:"https://webdev-api.loftschool.com/sendmail",method:"post",data:{name:n.val(),phone:a.val(),comment:o.val(),to:e.val()}})).done(function(e){r.text(e.message)}),e.fail(function(e){e=e.responseJSON.message;r.text(e),i.addClass("error-modal")}),e.always(function(){$.fancybox.open({src:"#modal-form",type:"inline"})}))}),$(".app-close-modal").click(function(e){e.preventDefault(),$.fancybox.close(),form.reset()}),function(){var o=$("section"),i=$(".maincontent"),r=$(".fixed-menu"),c=r.find(".fixed-menu__item"),e=new MobileDetect(window.navigator.userAgent).mobile(),s=!1;o.first().addClass("active");function l(e,t,n){e.eq(t).addClass(n).siblings().removeClass(n)}function a(e){var t,n,a;s||(s=!0,t=function(e){e*=-100;return isNaN(e)?(console.error("передано не верное значение в countSectionPosition"),0):e}(e),n=e,a="fixed-menu--shadowed","black"==o.eq(n).attr("data-sidemenu-theme")?r.addClass(a):r.removeClass(a),i.css({transform:"translateY(".concat(t,"%)")}),l(o,e,"active"),setTimeout(function(){s=!1,l(c,e,"fixed-menu__item--active")},1300))}function d(){var e=o.filter(".active"),t=e.next(),n=e.prev();return{next:function(){t.length&&a(t.index())},prev:function(){n.length&&a(n.index())}}}$(window).on("wheel",function(e){var t=e.originalEvent.deltaY,e=d();0<t&&e.next(),t<0&&e.prev()}),$(window).on("keydown",function(e){var t=e.target.tagName.toLowerCase(),t="input"==t||"textarea"==t,n=d();if(!t)switch(e.keyCode){case 38:n.prev();break;case 40:n.next()}}),$(".wrapper").on("touchmove",function(e){return e.preventDefault()}),$("[data-scroll-to").click(function(e){e.preventDefault();e=$(e.currentTarget).attr("data-scroll-to"),e=$("[data-section-id=".concat(e,"]"));a(e.index())}),e&&$("body").swipe({swipe:function(e,t){d()["down"==t?"prev":"up"==t?"next":""]()}})}();var soundControl,soundLevel,playerContainer=$(".player"),eventsInit=function(){$(".player__start").click(function(e){e.preventDefault(),playerContainer.hasClass("paused")?player.pauseVideo():player.playVideo()}),$(".player__playback").click(function(e){var t=$(e.currentTarget),e=e.originalEvent.layerX;console.log(e);e=e/t.width()*100,t=player.getDuration()/100*e;$(".player__playback-button").css({left:"".concat(e,"%")}),player.seekTo(t)}),$(".player__splash").click(function(e){player.playVideo()})},formatTime=function(e){Math.round(e);var t=Math.floor(roundTime/60),e=roundTime-60*t;return"".concat(t," : ").concat(e)},onPlayerReady=function(){var e,t=player.getDuration();void 0!==e&&clearInterval(e),e=setInterval(function(){var e=player.getCurrentTime()/t*100;$(".player__playback-button").css({left:"".concat(e,"%")})},1e3)},onPlayerStateChange=function(e){switch(e.data){case 1:playerContainer.addClass("active"),playerContainer.addClass("paused"),$("#play").css("display","none"),$("#pause").css("display","block");break;case 2:playerContainer.removeClass("active"),playerContainer.removeClass("paused"),$("#pause").css("display","none"),$("#play").css("display","block")}},dimensions={height:"390",width:"660"},isTablets=window.matchMedia("(max-width: 768px)").matches,isMobile=window.matchMedia("(max-width: 480px)").matches;function onYouTubeIframeAPIReady(){player=new YT.Player("yt-player",_objectSpread(_objectSpread({},dimensions),{},{videoId:"LXb3EKWsInQ",events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange},playerVars:{controls:0,disablekb:0,showInfo:0,rel:0,autoplay:0,modestbranding:0}}))}function initVars(){player=document.getElementById("yt-player"),soundControl=document.getElementById("micLevel")}isTablets&&(dimensions={height:"351",width:"594"}),isMobile&&(dimensions={height:"233",width:"394"}),eventsInit(),$().ready(function(){initVars(),soundControl.min=0,soundControl.max=100,soundControl.value=soundControl.max}),$("#mic").on("click",function(){player.isMuted()?(soundControl.value=100*soundLevel,player.unMute()):(soundControl.value=0,player.mute())}),$("#micLevel").on("change",function(){player.setVolume($(this).val())}),$(".slider__list").bxSlider({}),$(".interactive-avatar__link").click(function(e){e.preventDefault();var n,t=$(e.currentTarget),e=t.attr("data-open"),e=(n=e,$(".reviews__item").filter(function(e,t){return $(t).attr("data-linked-with")==n})),t=t.closest(".interactive-avatar");e.addClass("active").siblings().removeClass("active"),t.addClass("active").siblings().removeClass("active")});